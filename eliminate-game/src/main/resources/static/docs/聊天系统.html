<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" xmlns:th="http://www.thymeleaf.org">
<head>
    <title>Game服文档-聊天系统</title>
    <meta charset="UTF-8">
    <meta name="keywords" content="doc"/>
    <meta name="description" content="文档文字版"/>
    <meta name="viewport" content="width=device-width, initial-scale=1, minimal-ui, shrink-to-fit=no">
    <link rel="stylesheet" href="../css/github-markdown.css">
    <style>
    	.markdown-body {
    		box-sizing: border-box;
    		min-width: 200px;
    		max-width: 980px;
    		margin: 0 auto;
    		padding: 45px;
    	}

    	@media (max-width: 767px) {
    		.markdown-body {
    			padding: 15px;
    		}
    	}
    </style>
</head>

<body>
    <article class="markdown-body">
     <h1>聊天系统</h1>
<h2>发送文字聊天-Interface</h2>
<p><em>chat@sendText&amp;text=fafafa</em></p>
<table>
<thead>
<tr><th>属性</th><th>必填</th><th>说明</th></tr>
</thead>
<tbody>
<tr><td>text</td><td>Y</td><td>文字内容</td></tr>
</tbody>
</table>
<pre><code class="language-json">{
    &quot;status&quot;:1,
    &quot;requestId&quot;:2,
    &quot;data&quot;:&quot;12162c25-6b6a-4cb8-8f11-611bb48c3b82&quot; // 返回的id
}
</code></pre>
<h2>发送红包-Interface</h2>
<p><em>chat@sendRed&amp;money=100&amp;num=30</em></p>
<table>
<thead>
<tr><th>属性</th><th>必填</th><th>说明</th></tr>
</thead>
<tbody>
<tr><td>money</td><td>Y</td><td>红包大小</td></tr>
<tr><td>num</td><td>Y</td><td>红包个数</td></tr>
</tbody>
</table>
<pre><code class="language-json">{
    &quot;status&quot;:1,
    &quot;requestId&quot;:2,
    &quot;data&quot;:&quot;12162c25-6b6a-4cb8-8f11-611bb48c3b82&quot; // 返回的id
}
</code></pre>
<h2>领取红包-Interface</h2>
<p><em>chat@takeRed&amp;redId=12162c25-6b6a-4cb8-8f11-611bb48c3b82</em></p>
<table>
<thead>
<tr><th>属性</th><th>必填</th><th>说明</th></tr>
</thead>
<tbody>
<tr><td>redId</td><td>Y</td><td>红包id</td></tr>
</tbody>
</table>
<pre><code class="language-json">{
    &quot;status&quot;:1,
    &quot;requestId&quot;:2,
    &quot;data&quot;:1.97 // 领取到的钱
}
</code></pre>
<h2>获取全服聊天记录-Interface</h2>
<p><em>chat@getChats&amp;page=0</em></p>
<table>
<thead>
<tr><th>属性</th><th>必填</th><th>说明</th></tr>
</thead>
<tbody>
<tr><td>page</td><td>Y</td><td>页数</td></tr>
</tbody>
</table>
<pre><code class="language-json">{
    &quot;status&quot;:1,
    &quot;requestId&quot;:38,
    &quot;data&quot;:[
        {
            &quot;id&quot;:&quot;6a3b4e4e-a283-47b8-9545-1e190279c09f&quot;, // 聊天id
            &quot;type&quot;:1,                                    // 类型 1.文字 2.红包
            &quot;date&quot;:1602655050630,                        // 发送时间
            &quot;playerId&quot;:5845,                          
            &quot;serverId&quot;:&quot;1001&quot;,
            &quot;playerPic&quot;:&quot;1&quot;,                             // 发送的玩家pic
            &quot;text&quot;:&quot;fafafa&quot;,                             // 文字   
            &quot;toMoney&quot;:0,                                 // 红包总大小
            &quot;curMoney&quot;:0,                                // 红包剩余
            &quot;toNum&quot;:0,                                   // 红包总个数
            &quot;curNum&quot;:0                                   // 红包剩余个数
        }
    ]
}
</code></pre>
<h2>收到新的聊天或者红包消息-Push</h2>
<p><em>CHAT_RECEIVE(&quot;push@chat&quot;, &quot;receive&quot;)</em></p>
<pre><code class="language-json">{
    &quot;status&quot;:3,
    &quot;requestId&quot;:0,
    &quot;cmd&quot;:&quot;push@chat&quot;,
    &quot;data&quot;:{
        &quot;receive&quot;:{
            &quot;id&quot;:&quot;6a3b4e4e-a283-47b8-9545-1e190279c09f&quot;, // 聊天id
            &quot;type&quot;:1,
            &quot;date&quot;:1602655050630,
            &quot;playerId&quot;:5845,
            &quot;serverId&quot;:&quot;1001&quot;,
            &quot;playerPic&quot;:&quot;1&quot;,
            &quot;text&quot;:&quot;fafafa&quot;,
            &quot;toMoney&quot;:0,
            &quot;curMoney&quot;:0,
            &quot;toNum&quot;:0,
            &quot;curNum&quot;:0
        }
    }
}
</code></pre>

    </article>
</body>

</html>